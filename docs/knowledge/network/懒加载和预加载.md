---
title: 懒加载和预加载
date: 2019-01-28 9:30:00
tags: 总结
---

## 懒加载
延迟加载图片，在需要显示图片的时候再去请求资源，能减少无用资源的加载，防止并发加载的资源过多阻塞js的加载，影响功能

> 原理

首先将页面上的图片的 src 属性设为空字符串，而图片的真实路径则设置在data-url属性中，
当页面滚动的时候需要去监听scroll事件，在scroll事件的回调中，判断我们的懒加载的图片是否进入可视区域,如果图片在可视区内将图片的 src 属性设置为data-url 的值，这样就可以实现延迟加载。

优化：请求一张小的占位图作为默认显示，等到需要展示时再替换

> 使用lazyload插件可以做这件事

## 预加载

> 原理
 
使用该技术来预先告知浏览器某些资源可能在将来会被使用到。预加载简单来说就是将所有所需的资源提前请求加载到本地，这样后面在需要用到时就直接从缓存取资源。

实现：  
相当于在加载图片前请求图片，并缓存到浏览器
``` javascript 
//myPreload.js文件
var image= new Image()
image.src="http://pic.com/2.jpg"
```

参考：
https://juejin.im/post/5b0c3b53f265da09253cbed0